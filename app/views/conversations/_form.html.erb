
<%= form_for :conversation, url: :conversations, html: { class: "" } do |f| %>
    <div class="form-group">
      <% if params[:user] %>
        <%= f.label "Получатели" %>
        <%= f.text_field :user, :disabled => true, :placeholder => User.find(params[:user]).name %>
        <%= f.hidden_field :recipients, :multiple => true, value: User.find(params[:user]).id %>
      <% else %>
        <%= f.label "Получатели" %>
        <%= f.select(:recipients, User.all.collect {|p| [ p.name, p.id ] }, {}, { multiple: true , class: "js-example-basic-multiple form-control" })%>
      <% end %>
<script type="text/javascript">
$("js-example-basic-multiple").select2();
</script>

    </div>
    <div class="form-group">
      <%= f.label "Тема" %>
      <%= f.text_field :subject, placeholder: "Тема", class: "form-control" %>
    </div>
    <div class="form-group">
      <%= f.label "Сообщение" %>
      <%= f.text_area :body, class: 'form-control',placeholder: "Написать сообщение", rows: 4  %>
    </div>

    <%= f.submit "Отправить", class: "btn btn-success" %>

<% end %>




